<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://subpatch.net/ref/command-line/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Command line arguments - subpatch</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Command line arguments";
        var mkdocs_page_input_path = "ref/command-line.md";
        var mkdocs_page_url = "/ref/command-line/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> subpatch
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Explanations</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../exp/intro/">Introduction</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../exp/history/">Pre-subpatch history</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../exp/requirements/">Requirements</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../exp/design/">Design decisions</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../exp/comparison/">Comparison to other tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../exp/faq/">Frequently asked questions</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Tutorials</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tut/installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tut/basic-usage/">Basic usage</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">How-to guides</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../howto/yocto/">Project based on Yocto</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Command line arguments</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#subpatch-list">subpatch list</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#subpatch-status">subpatch status</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#subpatch-add">subpatch add</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#subpatch-update">subpatch update</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#subpatch-configure">subpatch configure</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#commands-not-implemented-yet">Commands, not implemented yet</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../glossary/">Glossary</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../releases/">Releases</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fosdem25/">FOSDEM 25</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../imprint/">Imprint</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">subpatch</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Reference</li>
      <li class="breadcrumb-item active">Command line arguments</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="command-line-arguments">Command line arguments</h1>
<p>The subpatch command line tool uses the common argument structure with multiple
arguments and one command. It is the same as other popular tools like <code>git</code> or
<code>docker</code>. Examples:</p>
<pre><code>subpatch status
subpatch add &lt;url&gt; -r &lt;revision&gt;
</code></pre>
<p>Here <code>status</code> and <code>add</code> are commands and <code>-r &lt;revision&gt;</code> is an optional
argument.</p>
<p>subpatch uses the <a href="https://docs.python.org/3/library/argparse.html">argparse module</a> of python.
So the following commands are equivalent:</p>
<pre><code>subpatch add -r=&lt;revision&gt; &lt;url&gt;
subpatch add -r&lt;revision&gt; &lt;url&gt;
subpatch add -r &lt;revision&gt; &lt;url&gt;
subpatch add &lt;url&gt; --revision=&lt;revision&gt;
subpatch add &lt;url&gt; --revision &lt;revision&gt;
</code></pre>
<h2 id="subpatch-list">subpatch list</h2>
<p>subpatch list</p>
<p>Print the path of all subprojects in the repository.</p>
<h2 id="subpatch-status">subpatch status</h2>
<pre><code>subpatch status
</code></pre>
<p>Show the current state of all subprojects in the superproject. It prints the
URL, integrated revision and whether the files of the subproject are changed.
E.g. if there are untracked files, unstaged changes or staged, but uncommitted
changes.</p>
<p>It's similar to <code>git status</code>, but not for the whole repository. Only for the
subprojects.</p>
<h2 id="subpatch-add">subpatch add</h2>
<pre><code>subpatch add &lt;url&gt; [&lt;path&gt;] [-r | --revision &lt;revision&gt;] [-q | --quiet]
</code></pre>
<p>Add the remote project specified by <code>url</code> as a subproject at the optional
<code>path</code> in the current repository.  Currently <code>url</code> can only point to a git
repository. Other subproject types are not supported yet.</p>
<p>The <code>path</code> is optional. If it's omitted the canonical subproject name is used.
It's mostly the last folder name in the <code>url</code>. If <code>path</code> is provided it can
include also sub directories.</p>
<p>If no <code>--revision</code> argument is given, subpatch uses the remote default branch
for git repositories. It's mostly the <code>main</code> branch, but the remote repository
can configured also different branches as the default <code>HEAD</code>.</p>
<p><code>-r,--revision</code>: Specify the revision of the subproject that should be included
in the superproject. For git repositories it can be a branch name, a tag name
or a commit id. For performance you should give a branch name or tag name. The
git protocol allows to clone a single branch or tag efficiently. For git commit
ids subpatch needs to download the whole repository including all branches,
tags and the complete history instead of just a single revision.</p>
<p><code>-q,--quiet</code>: Suppress any output to stdout.</p>
<h2 id="subpatch-update">subpatch update</h2>
<pre><code>subpatch update &lt;path&gt; [--revision | -r &lt;revision&gt;] [--url | -r &lt;url&gt;]
</code></pre>
<p>Update the subproject at <code>path</code>. subpatch downloads the remote repository at
<code>url</code> and unpacks the source files specified by the <code>revision</code>. All existing
and tracked files of the subproject are removed and replaced by the downloaded
files.</p>
<p>If no <code>--revision</code> argument is given, subpatch uses the value from the config.
Otherwise subpatch uses the new <code>revision</code> from the command line and updates
the value in the config.</p>
<p>If no <code>--url</code> argument is given, subpatch uses the value from the config.
Otherwise subpatch uses the new <code>url</code> from the command line and updates the
value in the config.</p>
<h2 id="subpatch-configure">subpatch configure</h2>
<pre><code>subpatch configure [-q | --quiet]
</code></pre>
<p>Configure the current superproject to use subpatch. The command adds the
<code>.subpatch</code> config file at toplevel directory of the superproject. subpatch
uses the existens of this file as a marker that the project is using subpatch.</p>
<p>This command works only for git repositories as superprojects currently.
subpatch does not support other SCM tools or plain directories for now.</p>
<p>Normally you do not have to exectued this command. <code>subpatch add</code>
automatically configures the superproject if necessary.</p>
<p><code>-q,--quiet</code>: Suppress any output to stdout.</p>
<h2 id="commands-not-implemented-yet">Commands, not implemented yet</h2>
<p>The following list is a draft for additional commands. subpatch will implement
these in that form or another.</p>
<ul>
<li><code>rm &lt;subproject&gt;</code>: Remove subproject code and config data. The reverse of <code>add</code>.</li>
<li><code>mv &lt;subproject&gt; &lt;new directory for subproject&gt;</code>:
  Move/rename subproject to a new directory and update the config data</li>
<li><code>foreach &lt;command&gt;</code>: Execute a shell command for every subproject.
  All the other multi repository management tools also have such a command.
  So subpatch also needs it. See <code>repo foreach</code> and <code>git submodule foreach</code></li>
<li><code>check</code>: Verify subproject source code, patches and config<ul>
<li>check that subpatch config/subproject config is valid/consistent</li>
<li>check that patches can be reverted to obtain the original source code</li>
<li>check that a superproject diff/patch/commit-range does not break the
  invariants. (This should be used in the CI)</li>
</ul>
</li>
<li><code>reformat</code>: reformat the subpatch config a consistent way. There also will be
   some sort of <code>--check</code> argument to verify the style in a CI pipeline.</li>
<li><code>create-patches</code>: from the last or multiple last commits of the subproject,
  create patches for the subproject, to fullfill the invariant.</li>
<li><code>root</code>: Show the root path of the superproject. Useful
  for something like <code>croot</code> in the AOSP. For git the command looks like
  <code>git rev-parse --show-toplevel</code>.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../howto/yocto/" class="btn btn-neutral float-left" title="Project based on Yocto"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../glossary/" class="btn btn-neutral float-right" title="Glossary">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright © 2024-2025 Stefan Lengfeld (This website is licensed under CC BY-SA 4.0)</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../howto/yocto/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../glossary/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
